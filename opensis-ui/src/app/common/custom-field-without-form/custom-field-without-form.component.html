<div *ngIf="schoolAddViewModel.schoolMaster.fieldsCategory">
    <div class="py-6" @stagger fxLayout="column" *ngIf="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId]?.customFields.length > 0">
        <ul *ngIf="schoolCreateMode==schoolCreate.EDIT" class="md:grid md:grid-cols-2 md:col-gap-8 md:row-gap-0 mx-4">
            <li
                *ngFor="let customField of schoolAddViewModel.schoolMaster.fieldsCategory[categoryId]?.customFields; let index = index">
                <div *ngIf="customField.type === 'Checkbox'">
                    <mat-checkbox
                        [(ngModel)]="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId].customFields[index].customFieldsValue[0].customFieldValue"
                        name="{{customField.title.replace(' ','_')}}" color="primary" class="mr-6">{{customField.title}}
                    </mat-checkbox>
                </div>
                <div *ngIf="customField.type === 'Dropdown'">
                    <mat-form-field class="w-full" appearance="outline" color="primary">
                        <mat-label>{{customField.title}}</mat-label>
                        <mat-select name="{{customField.title.replace(' ','_')}}" #schoolDropdown="ngModel"
                            [(ngModel)]="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId].customFields[index].customFieldsValue[0].customFieldValue"
                            [required]="customField.required ? true : null ">
                            <mat-option *ngFor="let option of customField.selectOptions.split('|')" [value]="option">
                                {{ option }}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="schoolDropdown.errors?.required">
                            {{customField.title}} is required</mat-error>

                    </mat-form-field>
                </div>
                <div *ngIf="customField.type === 'Textarea'">
                    <mat-form-field class="w-full" appearance="outline" color="primary">
                        <mat-label>{{customField.title}}</mat-label>
                        <textarea name="{{customField.title.replace(' ','_')}}" #schoolTextArea="ngModel" matInput
                            [(ngModel)]="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId]?.customFields[index]?.customFieldsValue[0].customFieldValue"
                            [required]="customField.required ? true : null "></textarea>

                        <mat-error *ngIf="schoolTextArea.errors?.required">
                            {{customField.title}} is required</mat-error>
                    </mat-form-field>
                </div>
                <div *ngIf="customField.type === 'Number'">
                    <mat-form-field class="w-full" appearance="outline" color="primary">
                        <mat-label>{{customField.title}}</mat-label>
                        <input matInput type="field.type" maxlength="100"
                            [required]="customField.required ? true : null"
                            name="{{customField.title.replace(' ','_')}}">
                    </mat-form-field>
                </div>

                <div *ngIf="customField.type === 'Date'">
                    <mat-form-field class="w-full" appearance="outline" color="primary">
                        <mat-label>{{customField.title}}</mat-label>
                        <input name="{{customField.title.replace(' ','_')}}"
                            [(ngModel)]="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId]?.customFields[index]?.customFieldsValue[0].customFieldValue"
                            [matDatepicker]="testDate" matInput [required]="customField.required ? true : null ">
                        <mat-datepicker-toggle [for]="testDate" matSuffix></mat-datepicker-toggle>
                        <mat-datepicker #testDate></mat-datepicker>
                    </mat-form-field>
                </div>
                <div *ngIf="customField.type === 'Text'">
                    <mat-form-field class="w-full" appearance="outline" color="primary">
                        <mat-label>{{customField.title}}</mat-label>
                        <input name="{{customField.title.replace(' ','_')}}" #schoolField="ngModel"
                            [(ngModel)]="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId]?.customFields[index]?.customFieldsValue[0].customFieldValue"
                            matInput type="customField.type" maxlength="100"
                            [required]="customField.required ? true : null ">
                        <mat-error *ngIf="schoolField.errors?.required">
                            {{customField.title}} is required</mat-error>

                    </mat-form-field>
                </div>
                <div *ngIf="customField.type === 'Multiple SelectBox'">
                    <mat-form-field class="w-full" appearance="outline" color="primary">
                        <mat-label>{{customField.title}}</mat-label>
                        <mat-select name="{{customField.title.replace(' ','_')}}"
                            [(ngModel)]="schoolAddViewModel.schoolMaster.fieldsCategory[categoryId]?.customFields[index]?.customFieldsValue[0].customFieldValue"
                            multiple [required]="customField.required ? true : null ">
                            <mat-option *ngFor="let option of customField.selectOptions.split('|')" [value]="option">
                                {{option}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

            </li>
        </ul>

        <ul *ngIf="schoolCreateMode==schoolCreate.VIEW" class="md:grid md:grid-cols-3 md:col-gap-8 md:row-gap-10">
            <li
                *ngFor="let customField of schoolAddViewModel.schoolMaster?.fieldsCategory[categoryId]?.customFields; let index = index">
                <label class="text-sm leading-5 text-gray">{{customField.title}}</label>
                <p class="mt-1 text-sm leading-5 sm:mt-0 sm:col-span-2">
                    {{schoolAddViewModel.schoolMaster.fieldsCategory[categoryId].customFields[index]?.customFieldsValue[0].customFieldValue}}
                </p>
            </li>
        </ul>
    </div> 
</div>