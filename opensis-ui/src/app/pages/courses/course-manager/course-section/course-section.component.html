<vex-mat-spinner-overlay *ngIf="loading" color="accent"></vex-mat-spinner-overlay>
<div class="lg:flex w-full" [ngClass]="courseDetails === 1?'show-course-details' : ''">
    <div class="lg:w-1/2 lg:pr-6">
        <div class="card overflow-auto">
            <div class="flex justify-between w-full px-6 py-2 items-center">
                <div>
                    <a class="flex cursor-pointer items-center mr-3"
                        (click)="backToCourse()">
                        <mat-icon [icIcon]="icBack" class="mr-4"></mat-icon>
                        <div>
                            <h3 class="font-bold">{{courseDetailsFromParent.courseTitle}}</h3>
                            <p>{{getAllCourseSectionModel.getCourseSectionForView?.length}} Course Sections Found</p>
                        </div>
                    </a>
                </div>
                <div>
                    <button mat-raised-button color="primary" (click)="addCourseSection()">
                        <mat-icon [icIcon]="icAdd" class="mr-2"></mat-icon>
                        {{'addNewCourseSection'|translate}}
                    </button>
                </div>
            </div>
            <hr />
            <input
                class="w-full border-0 focus:border-0 focus:border-none focus:outline-none px-6 py-4 box-border"
                type="text" placeholder="Search Course Section..." [(ngModel)]="nameSearch">
            <hr />
            <ul>
                <li *ngFor="let section of getAllCourseSectionModel.getCourseSectionForView | filter:nameSearch;let index=index" [ngClass]="selectedCourseSection==index?'pl-5 pr-2 py-3 bg-green-light border-l-4 border-green':'pl-6 pr-2 py-3 border-b'">
                    <div class="flex items-center w-full justify-between">
                        <a  class="cursor-pointer hover:text-blue" (click)="changeRightSectionDetails(section,index)">
                            <h4 [ngClass]="selectedCourseSection==index?'text-green font-bold':'font-bold'">{{section.courseSection.courseSectionName}}</h4>
                            <p>{{section.courseSection.durationBasedOnPeriod?section.courseSection.mpTitle:(section.courseSection.durationStartDate|date)+' - '+(section.courseSection.durationEndDate|date)}}<span class="dot-separator"></span>Rabindra Nath Tagore</p>
                        </a>
                        <div>
                            <div class="flex items-center">
                                <p class="text-lg text-green font-bold" matTooltip="{{section.courseSection.seats+' Seats Available'}}">{{section.courseSection.seats}} /
                                    20</p>
                                <span [ngClass]="section.courseSection.isActive?'bg-green':'bg-gray-light'" class="w-3 h-3 ml-4 rounded-full inline-block"
                                    matTooltip="{{section.courseSection.isActive?'Active':'Inactive'}}"></span>
                                <a [matMenuTriggerFor]="addNewMenu"
                                    class="cursor-pointer ml-3 inline-block pt-1 align-middle">
                                    <mat-icon [icIcon]="icMoreVertical" class="mr-2"></mat-icon>
                                </a>
                            </div>
                            <mat-menu #addNewMenu="matMenu" [overlapTrigger]="false" xPosition="before" yPosition="below">
                                <button mat-menu-item (click)="editCourseSection(section)">
                                    <span>{{'editItem' | translate}}</span>
                                </button>
                                <button mat-menu-item>
                                    <span>{{'deleteItem' | translate}}</span>
                                </button>
                            </mat-menu>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="lg:w-1/2 lg:pl-6 course-details" *ngIf="getAllCourseSectionModel.getCourseSectionForView?.length>0">
        <div class="card overflow-auto">
            <div class="flex justify-between w-full pl-6 py-3 align-middle">
                <h3 class="pt-1">{{selectedSectionDetails.courseSection.courseSectionName}}</h3>
                <div>
                    <label [ngClass]="selectedSectionDetails.courseSection.isActive?'bg-green':'bg-gray'" class="inline-block rounded px-2 py-1 text-xs text-white">{{selectedSectionDetails.courseSection.isActive?'ACTIVE':'INACTIVE'}}</label>
                    <a [matMenuTriggerFor]="addNewMenu1"
                        class="cursor-pointer inline-block ml-2 px-1 pt-1 align-middle">
                        <mat-icon [icIcon]="icMoreVertical" class="mr-2"></mat-icon>
                    </a>
                    <button class="text-secondary mr-4 lg:hidden" (click)="closeCourseDetails()"
                        mat-icon-button type="button">
                        <mat-icon [icIcon]="icClose"></mat-icon>
                    </button>
                    <mat-menu #addNewMenu1="matMenu" [overlapTrigger]="false" xPosition="before" yPosition="below">
                        <button mat-menu-item  (click)="editCourseSection(selectedSectionDetails)">
                            <span>{{'editItem' | translate}}</span>
                        </button>
                        <button mat-menu-item>
                            <span>{{'deleteItem' | translate}}</span>
                        </button>
                    </mat-menu>
                </div>
            </div>
           
            <hr />
            <div class="custom-tabs">
                <ul class="flex border-b">
                    <li [ngClass]="selectedTab === 'overview'?'active' : ''"><a
                            class="cursor-pointer px-6 py-4 inline-block hover:bg-skyblue-light" (click)="changeTab('overview')">{{'Overview'|translate}}</a>
                    </li>
                    <li [ngClass]="selectedTab === 'scheduled_students'?'active' : ''"><a class="cursor-pointer px-6 py-4 inline-block hover:bg-skyblue-light" (click)="changeTab('scheduled_students')">{{'scheduledStudents'|translate}}
                            (20)</a></li>
                    <li [ngClass]="selectedTab === 'scheduled_teachers'?'active' : ''"><a class="cursor-pointer px-6 py-4 inline-block hover:bg-skyblue-light" (click)="changeTab('scheduled_teachers')">{{'scheduledTeachers'|translate}}
                            (2)</a></li>
                </ul>
            </div>

            <div *ngIf="selectedTab === 'overview'">
                <!-- Overview Tab Start -->
            <ul class="grid sm:grid-cols-2 sm:col-gap-6 row-gap-6 sm:row-gap-8 my-6 px-6">
                <li>
                        <label class="text-sm leading-5 text-gray">{{'courseSectionName' |
                            translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.courseSectionName}}</p>
                </li>
                <li>
                    <label class="text-sm leading-5 text-gray">{{'calendar' | translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.schoolCalendars.title}}</p>
                </li>
                <li>
                    <label class="text-sm leading-5 text-gray">{{'gradeScale' | translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.gradeScale.gradeScaleName}}</p>
                </li>
                <li>
                    <label class="text-sm leading-5 text-gray">{{'creditHours' | translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.creditHours}}</p>
                </li>
                <li>
                    <label class="text-sm leading-5 text-gray">{{'seats' | translate}}</label>
                        <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">20 <span
                                class="inline-block align-middle mx-2 text-gray-light">|</span> <span
                                class="text-green font-bold">{{20-selectedSectionDetails.courseSection.seats}} Available</span></p>
                </li>
                <li>
                        <label class="text-sm leading-5 text-gray">{{'attendanceCategory' |
                            translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection?.attendanceCodeCategories?.title}}</p>
                </li>
                <li class="col-span-2">
                    <div class="flex flex-wrap -mb-4">
                <span class="mr-5 mb-4">
                                <mat-icon [icIcon]="selectedSectionDetails.courseSection.isWeightedCourse?icCheckboxChecked:icCheckboxUnchecked"
                                    class="inline-block align-middle mr-1">
                                </mat-icon> {{'courseIsWeighted' | translate}}
                </span>
                <span class="mr-5 mb-4">
                            <mat-icon [icIcon]="selectedSectionDetails.courseSection.useStandards?icCheckboxChecked:icCheckboxUnchecked" class="inline-block align-middle mr-1">
                            </mat-icon> {{'useStandards' | translate}}
                </span>
                <span class="mr-5 mb-4">
                            <mat-icon [icIcon]="selectedSectionDetails.courseSection.affectsClassRank?icCheckboxChecked:icCheckboxUnchecked" class="inline-block align-middle mr-1">
                            </mat-icon> {{'affectsClassRank' | translate}}
                </span>
                <span class="mr-5 mb-4">
                            <mat-icon [icIcon]="selectedSectionDetails.courseSection.affectsHonorRoll?icCheckboxChecked:icCheckboxUnchecked"  class="inline-block align-middle mr-1">
                            </mat-icon> {{'affectsHonorRoll' | translate}}
                </span>
                <span class="mr-5 mb-4">
                            <mat-icon [icIcon]="selectedSectionDetails.courseSection.onlineClassRoom?icCheckboxChecked:icCheckboxUnchecked" class="inline-block align-middle mr-1">
                            </mat-icon> {{'onlineClassRoom' | translate}}
                </span>
            </div>
                </li>
                <li *ngIf="selectedSectionDetails.courseSection.onlineClassRoom">
                    <label class="text-sm leading-5 text-gray">{{'onlineClassRoomUrl' | translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.onlineClassroomUrl}}</p>
                </li>
                <li *ngIf="selectedSectionDetails.courseSection.onlineClassRoom">
                    <label class="text-sm leading-5 text-gray">{{'onlineClassRoomPasswordIfAny' | translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.onlineClassroomPassword}}</p>
                </li>
                <li>
                    <label class="text-sm leading-5 text-gray">{{'standardGradeScale' | translate}}</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.gradeScale.gradeScaleName}}</p>
                </li>
                    <!-- <li>
                    <label class="text-sm leading-5 text-gray">{{'duration' | translate}} (Marking Period)</label>
                    <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2"><span class="font-bold">Quarter 3</span><br/><span class="text-sm">Mar 10, 2021 - Jun 09, 2021</span></p>
                </li> -->
                </ul>
                <hr class="my-4" />
                <h3 class="mx-6 text-green">{{'duration' | translate}}</h3>
                <ul class="grid sm:grid-cols-2 sm:col-gap-6 row-gap-6 sm:row-gap-8 my-6 px-6">
                <li>
                        <label class="text-sm leading-5 text-gray">Marking Period</label>
                        <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2"><span
                                class="font-bold">Quarter 3</span> - Mar 10, 2021 to Jun 09, 2021</p>
                </li>
            </ul>

            <div *ngIf="selectedSectionDetails.courseFixedSchedule">
                <hr class="my-4" />
                <!-- Fixed Schedule-->
                <h3 class="mx-6"><span class="text-green">{{'scheduleType' | translate}}</span> : {{'fixedSchedule' | translate}}</h3>
                <ul class="grid sm:grid-cols-2 sm:col-gap-6 row-gap-6 sm:row-gap-8 my-6 px-6">
                    <li>
                        <label class="text-sm leading-5 text-gray">{{'room' | translate}}</label>
                        <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseFixedSchedule.rooms?.title}}</p>
                    </li>
                    <li>
                        <label class="text-sm leading-5 text-gray">{{'period' | translate}}</label>
                        <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseFixedSchedule.blockPeriod?.periodTitle}}</p>
                    </li>
                    <li>
                        <label class="text-sm leading-5 text-gray">{{'meetingDays' | translate}}</label>
                        <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.meetingDays|weekDay}}</p>
                    </li>
                    <li>
                        <label class="text-sm leading-5 text-gray">{{'takeAttendance' | translate}}</label>
                        <!-- <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{'yes' | translate}}</p> -->
                        <p class="mt-1 text-base leading-5 sm:mt-0 sm:col-span-2">{{selectedSectionDetails.courseSection.attendanceTaken?('yes'|translate):('no'|translate)}}</p>
                    </li>
                </ul>
            </div>
                <div *ngIf="selectedSectionDetails.courseVariableSchedule?.length>0">
                <hr class="my-4" />
                <!-- Variable Schedule -->
                <h3 class="mx-6 mb-4"><span class="text-green">{{'scheduleType' | translate}}</span> : {{'variableSchedule' | translate}}</h3>
                <div class="flex py-2 border-t border-normal">
                    <div class="w-3/12 font-bold pl-6">{{'day' | translate}}</div>
                    <div class="w-3/12 font-bold">{{'period' | translate}}</div>
                    <div class="w-3/12 font-bold">{{'room' | translate}}</div>
                    <div class="w-3/12 font-bold text-center pr-6">{{'takeAttendance' | translate}}</div>
                </div>
                <div class="flex py-3 border-t border-normal" *ngFor="let variableSchedule of selectedSectionDetails.courseVariableSchedule">
                    <div class="w-3/12 pr-6 pl-6">{{variableSchedule.day}}</div>
                    <div class="w-3/12 pr-6">{{variableSchedule.blockPeriod.periodTitle}}</div>
                    <div class="w-3/12 pr-6">{{variableSchedule.rooms.title}}</div>
                    <div class="w-3/12 text-center pr-6"><mat-icon [icIcon]="variableSchedule.takeAttendance?icCheckboxChecked:icCheckboxUnchecked" class="inline-block align-middle mr-1"></mat-icon></div>
                </div>
            </div>
            <div *ngIf="selectedSectionDetails.courseCalendarSchedule?.length>0">
                <hr class="my-4" />
                <!-- Calendar Schedule -->
                <h3 class="mx-6 mb-4"><span class="text-green">{{'scheduleType' | translate}}</span> : {{'enterByCalendarDays' | translate}}</h3>
                <p class="my-10 mx-6 text-gray-light text-center">Show Calendar - view mode</p>
            </div>
                <div style="display: none;">
            <hr class="my-4"/>
                <!-- Block Schedule -->
                <h3 class="mx-6 mb-4"><span class="text-green">{{'scheduleType' | translate}}</span> : {{'blockRotatingSchedule' | translate}}</h3>
                <div class="flex py-2 border-t border-normal">
                    <div class="w-3/12 font-bold pl-6">{{'blockRotationDay' | translate}}</div>
                    <div class="w-3/12 font-bold">{{'period' | translate}}</div>
                    <div class="w-3/12 font-bold">{{'room' | translate}}</div>
                    <div class="w-3/12 font-bold text-center pr-6">{{'takeAttendance' | translate}}</div>
                </div>
                <div class="flex py-3 border-t border-normal">
                    <div class="w-3/12 pr-6 pl-6">Mon-Thu</div>
                    <div class="w-3/12 pr-6">Period 1</div>
                    <div class="w-3/12 pr-6">Room 101</div>
                    <div class="w-3/12 text-center pr-6"><mat-icon [icIcon]="icCheckboxChecked" class="inline-block align-middle mr-1"></mat-icon></div>
                </div>
                <div class="flex py-3 border-t border-normal">
                    <div class="w-3/12 pr-6 pl-6">Mon-Thu</div>
                    <div class="w-3/12 pr-6">Period 5</div>
                    <div class="w-3/12 pr-6">Room 101</div>
                    <div class="w-3/12 text-center pr-6"><mat-icon [icIcon]="icCheckboxUnchecked" class="inline-block align-middle mr-1"></mat-icon></div>
                </div>
                <div class="flex py-3 border-t border-normal">
                    <div class="w-3/12 pr-6 pl-6">Tue-Fri</div>
                    <div class="w-3/12 pr-6">Period 5</div>
                    <div class="w-3/12 pr-6">Room 101</div>
                    <div class="w-3/12 text-center pr-6"><mat-icon [icIcon]="icCheckboxUnchecked" class="inline-block align-middle mr-1"></mat-icon></div>
                </div>
                <div class="flex py-3 border-t border-normal">
                    <div class="w-3/12 pr-6 pl-6">Mon-Thu</div>
                    <div class="w-3/12 pr-6">Period 3</div>
                    <div class="w-3/12 pr-6">Room 105</div>
                        <div class="w-3/12 text-center pr-6">
                            <mat-icon [icIcon]="icCheckboxUnchecked" class="inline-block align-middle mr-1">
                            </mat-icon>
                        </div>
                </div>
                <div class="flex py-3 border-t border-normal">
                    <div class="w-3/12 pr-6 pl-6">Tue-Fri</div>
                    <div class="w-3/12 pr-6">Period 4</div>
                    <div class="w-3/12 pr-6">Room 101</div>
                        <div class="w-3/12 text-center pr-6">
                            <mat-icon [icIcon]="icCheckboxChecked" class="inline-block align-middle mr-1">
                            </mat-icon>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="selectedTab === 'scheduled_students'">
                <!-- Scheduled Students -->
                <div class="bg-white px-6 h-16 border-b sticky left-0" fxLayout="row"
                    fxLayoutAlign="start center">
                    <div class="flex w-full justify-between">
                        <div class="py-3" fxFlex="300px" fxFlex.lt-md="auto" fxHide.xs fxLayout="row"
                            fxLayoutAlign="start center">

                            <div class="flex">
                                <input class="pr-4 py-3 border-0 outline-none w-full bg-transparent"
                                    placeholder="Search..." type="search">
                                <button class="ml-4" fxFlex="none" fxHide.gt-xs mat-icon-button
                                    type="button">
                                    <mat-icon [icIcon]="icSearch"></mat-icon>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table @stagger mat-table [dataSource]=""
                        class="table-auto w-full" matSort>

                        <ng-container matColumnDef="student_name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{'studentName'|translate}}</th>
                            <td mat-cell *matCellDef="let element">
                                {{element.student_name}}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="student_id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'studentId'|translate}}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.student_id}}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="grade_level">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'gradeLevel'|translate}}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.grade_level}}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="schedule_date">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{'scheduleDate'|translate}}</th>
                            <td mat-cell *matCellDef="let element">
                                {{element.schedule_date}}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="loading">
                            <mat-footer-cell *matFooterCellDef colspan="6">
                                <!-- <vex-mat-spinner-overlay *ngIf="loading" color="accent">
                                </vex-mat-spinner-overlay> -->
                            </mat-footer-cell>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="visibleColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: visibleColumns" @fadeInUp></tr>

                    </table>
                </div>
            </div>

            <div *ngIf="selectedTab === 'scheduled_teachers'">
                <!-- Scheduled Teachers -->
                <ul class="grid sm:grid-cols-2 sm:col-gap-6 row-gap-6 sm:row-gap-8 my-6 px-6">
                    <li>
                        <div class="bg-white rounded border px-4 py-3">
                            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="16px" class="items-center">
                                <div class="relative" fxFlex="none">
                                    <img src="assets/img/default.jpg" class="avatar">
                                </div>
                                <div class="overflow-hidden" fxFlex="auto">
                                    <a routerLink="" class="subheading-2 leading-snug text-blue cursor-pointer">Rabindra Nath Tagore</a>
                                </div>
                                <div fxFlex="none" fxLayout="column" fxLayoutAlign="center end">
                                    <a routerLink=""><mat-icon [icIcon]="icEmail"></mat-icon></a>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="bg-white rounded border px-4 py-3">
                            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="16px" class="items-center">
                                <div class="relative" fxFlex="none">
                                    <img src="assets/img/default.jpg" class="avatar">
                                </div>
                                <div class="overflow-hidden" fxFlex="auto">
                                    <a routerLink="" class="subheading-2 leading-snug text-blue cursor-pointer">Danielle Boucher</a>
                                </div>
                                <div fxFlex="none" fxLayout="column" fxLayoutAlign="center end">
                                    <a routerLink=""><mat-icon [icIcon]="icEmail"></mat-icon></a>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>